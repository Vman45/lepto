!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.getBoundingClientRect(),n=t.top,i=t.left,o=window,r=o.pageYOffset,s=o.pageXOffset;return{top:n+r,left:i+s}},e.exports=t.default},function(e,t,n){"use strict";n(2);var i=r(n(3)),o=r(n(6));function r(e){return e&&e.__esModule?e:{default:e}}var s=void 0,a=void 0,d=void 0,u=void 0,l=void 0,A=void 0,c=void 0,h=void 0,f=void 0,m=void 0,v=void 0,p=function(e){e.addEventListener("paste",function(e){e.preventDefault();var t=e.clipboardData.getData("text/plain");document.execCommand("insertHTML",!1,t)})},E=function(e,t){return function(n){"string"==typeof s.filters[e].use[t]?s.filters[e].use[t]=n.target.value:s.filters[e].use[t].name=n.target.value}},y=function(e,t){return function(n){"string"==typeof s.filters[e].use[t]&&(s.filters[e].use[t]={name:s.filters[e].use[t]});var i=null;try{i=JSON.parse("{"+n.target.innerText+"}")}catch(e){n.target.classList.add("--error")}i&&(n.target.classList.remove("--error"),s.filters[e].use[t]=Object.assign({},{name:s.filters[e].use[t].name},i))}},g=function(e){return function(t){var n=function(e){var t=[],n=!0,i=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var a=r.value;""!==a&&t.push(a)}}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return t}(t.target.innerText.split("\n"));1===n.length&&(n=n[0]),s.filters[e].glob=n}},L=function(e){return function(t){("keypress"!==t.type||"keypress"===t.type&&13===t.keyCode)&&(s.filters.splice(e,1),B())}},b=function(e,t){return function(n){("keypress"!==n.type||"keypress"===n.type&&13===n.keyCode)&&(s.filters.splice(e+t,0,s.filters.splice(e,1)[0]),B())}},C=function(e){return function(t){("keypress"!==t.type||"keypress"===t.type&&13===t.keyCode)&&(s.filters[e].use.push({name:""}),B())}},w=function(e,t){return function(n){("keypress"!==n.type||"keypress"===n.type&&13===n.keyCode)&&(s.filters[e].use.splice(t,1),B())}},k=function(e){("keypress"!==e.type||"keypress"===e.type&&13===e.keyCode)&&(_(),e.target.classList.add("btn--disabled"),setTimeout(function(){e.target.classList.remove("btn--disabled")},1e3))},M=function(e){("keypress"!==e.type||"keypress"===e.type&&13===e.keyCode)&&(s.filters.push({glob:""}),B())},B=function(){for(var e in d.value=s.input,u.value=s.output,d.addEventListener("keyup",function(e){s.input=e.target.value}),u.addEventListener("keyup",function(e){s.output=e.target.value}),h.innerHTML="",s.filters)if(Object.prototype.hasOwnProperty.call(s.filters,e)){var t=parseInt(e,10),n=s.filters[t],i=document.createElement("div");i.className="filters__item";var o=document.createElement("div");if(o.className="filters__move",0!==t){var r=document.createElement("div");r.tabIndex=0,r.className="filters__move__up",r.addEventListener("click",b(t,-1)),r.addEventListener("keypress",b(t,-1)),o.appendChild(r)}var a=document.createElement("div");if(a.tabIndex=0,a.className="filters__move__cross",a.addEventListener("click",L(t)),a.addEventListener("keypress",L(t)),o.appendChild(a),t!==s.filters[t].length){var l=document.createElement("div");l.tabIndex=0,l.className="filters__move__down",l.addEventListener("click",b(t,1)),l.addEventListener("keypress",b(t,1)),o.appendChild(l)}i.appendChild(o);var A=document.createElement("div");A.className="filters__globs";var c=document.createElement("div");c.className="filters__globs__title",c.innerHTML="globs:",A.appendChild(c);var f=document.createElement("pre");p(f),f.className="filters__globs__content",f.setAttribute("contenteditable",!0),f.setAttribute("spellcheck",!1),f.addEventListener("keyup",g(t)),f.addEventListener("keypress",g(t)),Array.isArray(n.glob)?f.innerHTML=n.glob.join("\n"):f.innerHTML=n.glob,A.appendChild(f),i.appendChild(A);var m=document.createElement("div");for(var v in m.className="filters__use",n.use)Object.prototype.hasOwnProperty.call(s.filters,v)&&m.appendChild(I(n.use[v],t,v));var E=document.createElement("button",{type:"button"});E.className="btn btn--invisible",E.innerHTML="Add a plugin",E.addEventListener("click",C(t)),E.addEventListener("keypress",C(t)),m.appendChild(E),i.appendChild(m),h.appendChild(i)}},I=function(e,t,n){if("function"!=typeof e){var i=void 0;i="string"==typeof e?{name:e}:Object.assign({},e);var o=document.createElement("div");o.className="filters__use__item";var r=document.createElement("span");r.tabIndex=0,r.className="filters__use__cross",r.addEventListener("click",w(t,n)),r.addEventListener("keypress",w(t,n)),o.appendChild(r);var s=document.createElement("input");s.value=i.name,s.setAttribute("spellcheck",!1),s.addEventListener("keyup",E(t,n)),s.addEventListener("keypress",E(t,n)),o.appendChild(s),delete i.name;var a=document.createElement("pre");if(p(a),a.className="filters__use__data",a.setAttribute("contenteditable",!0),a.setAttribute("spellcheck",!1),a.addEventListener("keyup",y(t,n)),a.addEventListener("keypress",y(t,n)),Object.keys(i).length){var d=JSON.stringify(i,null,2);d=(d=d.substring(2,d.length-1)).split(/\n/).map(function(e){return e.replace(/^ {2}/,"")}).join("\n"),a.innerHTML=d}return o.appendChild(a),o}},Q=function e(t,n){return n.length>1?e(t[n[0]].children,n.splice(1,n.length)):t[n[0]]},T=function(e,t,n){var i=document.getElementById("sizeDiff");if(i){i.innerHTML="";var o=document.createElement("img");o.className="loader",o.src="data:image/gif;base64,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",i.appendChild(o)}t.src=n+"?q="+e+"&"+Math.random()},O=void 0,D=function(){O&&O.destroy(),O=new i.default("#result-img").width(500).height(500).borderRadius(250).backgroundColor("#616560").className("img__magnifier")},_=function(){var e=Q(a,v.split(",").map(function(e){return parseInt(e,10)})),t=e.path.substring(e.path.lastIndexOf(".")+1,e.path.length).toLowerCase();-1!==["png","jpg","jpeg","gif"].indexOf(t)&&("jpg"===t||"jpeg"===t?s.filters.push({glob:e.path,use:[{name:"lepto.jpeg",quality:parseInt(document.getElementById("q-range").value,10)}]}):"png"===t?s.filters.push({glob:e.path,use:[{name:"lepto.png",quality:parseInt(document.getElementById("q-range").value,10)}]}):"gif"===t&&s.filters.push({glob:e.path,use:[{name:"lepto.gif",colors:parseInt(document.getElementById("q-range").value,10)}]})),B(),(0,o.default)(Math.max(0,window.scrollY-300),300)},S=function(e){return function(t){("keypress"!==t.type||"keypress"===t.type&&13===t.keyCode)&&function(e){var t=Q(a,(v=e).split(",").map(function(e){return parseInt(e,10)})),n=t.path.substring(t.path.lastIndexOf(".")+1,t.path.length).toLowerCase();if(f.innerHTML="",-1!==["png","jpg","jpeg","gif"].indexOf(n)){var i=document.createElement("h2");i.className="title",i.innerHTML=t.name,f.appendChild(i);var r=document.createElement("span");r.innerHTML="Quality: ",f.appendChild(r);var s=document.createElement("span"),d=document.createElement("input");d.type="range",d.className="range",d.id="q-range","jpg"===n||"jpeg"===n?(d.min=1,d.max=100,d.value=80,s.innerHTML=d.value,f.appendChild(d)):"png"===n?(d.min=0,d.max=100,d.value=80,s.innerHTML=d.value,f.appendChild(d)):"gif"===n&&(r.innerHTML="Colors: ",d.min=2,d.max=256,d.value=256,s.innerHTML=d.value,f.appendChild(d)),r.appendChild(s);var u=document.createElement("span");u.id="sizeDiff",u.className="size-diff",f.appendChild(u);var l=document.createElement("button",{type:"button"});l.className="btn",l.innerHTML="Add optimization filter",f.appendChild(l),l.addEventListener("click",k),l.addEventListener("keypress",k);var A=document.createElement("div");A.className="img";var c=document.createElement("img");c.id="result-img",c.addEventListener("load",D),A.appendChild(c),f.appendChild(A),T(d.value,c,"ressources/"+t.path),d.addEventListener("change",function(e,t,n){return function(i){e.innerHTML=i.target.value,T(i.target.value,t,"ressources/"+n)}}(s,c,t.path)),(0,o.default)(f.offsetTop,200);var h=document.querySelectorAll("[data-file-id]"),m=!0,p=!1,E=void 0;try{for(var y,g=h[Symbol.iterator]();!(m=(y=g.next()).done);m=!0){var L=y.value;L.getAttribute("data-file-id")===v?L.classList.add("tree__item--selected"):L.classList.remove("tree__item--selected")}}catch(e){p=!0,E=e}finally{try{!m&&g.return&&g.return()}finally{if(p)throw E}}}}(e)}},x=function(){c.innerHTML="";var e=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=[];for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var r=t[o],s=document.createElement("div");s.className="tree__item",s.setAttribute("data-file-id",n+o),"file"===r.type&&(s.tabIndex=0,s.addEventListener("click",S(n+o)),s.addEventListener("keypress",S(n+o)));var a=document.createElement("h3");if(a.className="title",a.innerHTML=r.name+("directory"===r.type?"/":""),s.appendChild(a),r.children){var d=e(r.children,""+n+o+","),u=!0,l=!1,A=void 0;try{for(var c,h=d[Symbol.iterator]();!(u=(c=h.next()).done);u=!0){var f=c.value;s.appendChild(f)}}catch(e){l=!0,A=e}finally{try{!u&&h.return&&h.return()}finally{if(l)throw A}}}i.push(s)}return i}(a),t=!0,n=!1,i=void 0;try{for(var o,r=e[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var s=o.value;c.appendChild(s)}}catch(e){n=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw i}}},F=void 0,J=void 0,R=function(){F=Date.now(),l.classList.add("btn--disabled"),m&&m.emit("update-config",s)},Y=function(e){("keypress"!==e.type||"keypress"===e.type&&13===e.keyCode)&&R()},N=function(){d=document.getElementById("config.input"),u=document.getElementById("config.output"),l=document.getElementById("saveConfigBtn"),A=document.getElementById("addFilterBtn"),c=document.querySelector(".tree"),h=document.querySelector(".filters"),f=document.getElementById("selectedFile"),navigator.platform.indexOf("Win")>-1&&(l.innerHTML="Save config Ctrl+S"),l.addEventListener("click",Y),l.addEventListener("keypress",Y),A.addEventListener("click",M),A.addEventListener("keypress",M);var e=document.createElement("script");e.onload=function(){(m=io.connect(location.protocol+"//"+location.hostname+":"+(parseInt(location.port,10)+1))).on("config-update",function(e){s=e,v=null,B()}),m.on("tree-update",function(e){a=e,x()}),m.on("size-diff",function(e){var t=document.getElementById("sizeDiff");t&&(t.innerHTML=e)}),m.on("update-finish",function(){J&&clearTimeout(J);var e=Math.max(0,100-Date.now()+F);e?J=setTimeout(function(){l.classList.remove("btn--disabled")},e):l.classList.remove("btn--disabled")})},e.src=location.protocol+"//"+location.hostname+":"+(parseInt(location.port,10)+1)+"/socket.io/socket.io.js",document.body.appendChild(e),window.addEventListener("keydown",function(e){(115===e.which&&e.ctrlKey||83===e.which&&e.metaKey)&&(e.preventDefault(),R())})};!function(){var e=void 0,t=function(){e||(e=!0,N())};["interactive","complete"].indexOf(document.readyState)>=0?N():(e=!1,document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1))}()},function(e,t,n){!function(){"use strict";"undefined"!=typeof document&&function(e){var t;function n(){t||(t=!0,e())}["interactive","complete"].indexOf(document.readyState)>=0?e():(t=!1,document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1))}(function(){var e=!0,t=!1,n=null,i={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function o(e){return!!(e&&e!==document&&"HTML"!==e.nodeName&&"BODY"!==e.nodeName&&"classList"in e&&"contains"in e.classList)}function r(e){e.classList.contains("focus-visible")||(e.classList.add("focus-visible"),e.setAttribute("data-focus-visible-added",""))}function s(t){e=!1}function a(){document.addEventListener("mousemove",d),document.addEventListener("mousedown",d),document.addEventListener("mouseup",d),document.addEventListener("pointermove",d),document.addEventListener("pointerdown",d),document.addEventListener("pointerup",d),document.addEventListener("touchmove",d),document.addEventListener("touchstart",d),document.addEventListener("touchend",d)}function d(t){"html"!==t.target.nodeName.toLowerCase()&&(e=!1,document.removeEventListener("mousemove",d),document.removeEventListener("mousedown",d),document.removeEventListener("mouseup",d),document.removeEventListener("pointermove",d),document.removeEventListener("pointerdown",d),document.removeEventListener("pointerup",d),document.removeEventListener("touchmove",d),document.removeEventListener("touchstart",d),document.removeEventListener("touchend",d))}document.addEventListener("keydown",function(t){o(document.activeElement)&&r(document.activeElement),e=!0},!0),document.addEventListener("mousedown",s,!0),document.addEventListener("pointerdown",s,!0),document.addEventListener("touchstart",s,!0),document.addEventListener("focus",function(t){o(t.target)&&(e||function(e){var t=e.type,n=e.tagName;return!("INPUT"!=n||!i[t]||e.readOnly)||("TEXTAREA"==n&&!e.readOnly||!!e.isContentEditable)}(t.target))&&r(t.target)},!0),document.addEventListener("blur",function(e){o(e.target)&&(e.target.classList.contains("focus-visible")||e.target.hasAttribute("data-focus-visible-added"))&&(t=!0,window.clearTimeout(n),n=window.setTimeout(function(){t=!1,window.clearTimeout(n)},100),function(e){e.hasAttribute("data-focus-visible-added")&&(e.classList.remove("focus-visible"),e.removeAttribute("data-focus-visible-added"))}(e.target))},!0),document.addEventListener("visibilitychange",function(n){"hidden"==document.visibilityState&&(t&&(e=!0),a())},!0),a(),document.body.classList.add("js-focus-visible")})}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=a(n(0)),r=a(n(4)),s=a(n(5));function a(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.props={height:150,width:150,backgroundColor:"#fff",borderColor:"#eee",borderRadius:75,borderWidth:2},this.el="string"==typeof t?document.querySelector(t):t,this.lens=document.createElement("div"),this.lens.className="magnifier",this.lens.style.position="absolute",this.lens.style.backgroundRepeat="no-repeat",this.lens.style.borderStyle="solid",this.lens.style.overflow="hidden",this.lens.style.visibility="hidden",this.lens.style.boxShadow="0 1px 5px rgba(0, 0, 0, .25)",this.handleLoad=this.handleLoad.bind(this),this.handleTouchMove=this.handleTouchMove.bind(this),this.handleTouchEnd=this.handleTouchEnd.bind(this),Object.keys(this.props).forEach(function(e){return n.setStyle(e,n.props[e])}),(0,r.default)(this.lens,this.el),this.show(),this.calcImageSize(),this.bind()}return i(e,[{key:"calcImageSize",value:function(){var e=document.createElement("img");e.style.position="absolute",e.style.width="auto",e.style.visibility="hidden",e.src=this.el.src,e.onload=this.handleLoad,this.lens.appendChild(e)}},{key:"bind",value:function(){return this.el.addEventListener("mousemove",this.handleTouchMove,!1),this.el.addEventListener("mouseleave",this.handleTouchEnd,!1),this.el.addEventListener("touchstart",this.handleTouchMove,!1),this.el.addEventListener("touchmove",this.handleTouchMove,!1),this.el.addEventListener("touchend",this.handleTouchEnd,!1),this.lens.addEventListener("mousemove",this.handleTouchMove,!1),this.lens.addEventListener("mouseleave",this.handleTouchEnd,!1),this.lens.addEventListener("touchmove",this.handleTouchMove,!1),this.lens.addEventListener("touchend",this.handleTouchEnd,!1),this}},{key:"unbind",value:function(){return this.el.removeEventListener("mousemove",this.handleTouchMove,!1),this.el.removeEventListener("mouseleave",this.handleTouchEnd,!1),this.el.removeEventListener("touchstart",this.handleTouchMove,!1),this.el.removeEventListener("touchmove",this.handleTouchMove,!1),this.el.removeEventListener("touchend",this.handleTouchEnd,!1),this.lens.removeEventListener("mousemove",this.handleTouchMove,!1),this.lens.removeEventListener("mouseleave",this.handleTouchEnd,!1),this.lens.removeEventListener("touchmove",this.handleTouchMove,!1),this.lens.removeEventListener("touchend",this.handleTouchEnd,!1),this}},{key:"handleLoad",value:function(){var e=this.lens.getElementsByTagName("img")[0];this.imageWidth=e.offsetWidth,this.imageHeight=e.offsetHeight,this.hide(),this.lens.style.visibility="visible",this.lens.style.backgroundImage="url("+this.el.src+")",this.lens.removeChild(e)}},{key:"handleTouchMove",value:function(e){e.preventDefault();var t=0===e.type.indexOf("touch")?e.changedTouches[0]:e;if((0,s.default)(this.el,t)){this.show();var n=t.pageX,i=t.pageY,r=(0,o.default)(this.el),a=r.left,d=r.top,u=this.el,l=u.offsetLeft,A=u.offsetTop,c=u.offsetWidth,h=u.offsetHeight,f=this.props,m=f.width,v=f.height,p=f.borderWidth,E=(a-n)*(this.imageWidth/c)+(m/2-p),y=(d-i)*(this.imageHeight/h)+(v/2-p),g=n-m/2-(a!==l?a-l:0),L=i-v/2-(d!==A?d-A:0);this.lens.style.left=g+"px",this.lens.style.top=L+"px",this.lens.style.backgroundPosition=E+"px "+y+"px"}else this.hide()}},{key:"handleTouchEnd",value:function(){this.hide()}},{key:"height",value:function(e){return this.setProp("height",e)}},{key:"width",value:function(e){return this.setProp("width",e)}},{key:"backgroundColor",value:function(e){return this.setProp("backgroundColor",e)}},{key:"borderColor",value:function(e){return this.setProp("borderColor",e)}},{key:"borderRadius",value:function(e){return this.setProp("borderRadius",e)}},{key:"borderWidth",value:function(e){return this.setProp("borderWidth",e)}},{key:"setProp",value:function(e,t){return this.props[e]=t,this.setStyle(e,t),this}},{key:"setStyle",value:function(e,t){this.lens.style[e]="number"==typeof t?t+"px":t}},{key:"className",value:function(e){return this.lens.className=e,this}},{key:"show",value:function(){return this.lens.style.display="block",this}},{key:"hide",value:function(){return this.lens.style.display="none",this}},{key:"destroy",value:function(){this.unbind(),this.lens.remove()}}]),e}();t.default=d,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=t.nextSibling;return t.parentNode.insertBefore(e,n)},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=t.pageX,o=t.pageY,r=(0,i.default)(e),s=r.left,a=r.top,d=e.offsetWidth,u=e.offsetHeight;return n>=s&&n<=s+d&&o>=a&&o<=a+u};var i=function(e){return e&&e.__esModule?e:{default:e}}(n(0));e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,1e3/60)},window.cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)};var i={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}};t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"easeInOutQuad";e=Math.round(e),t=Math.round(t);var o=Date.now(),r=o+t,s=document.documentElement.scrollTop||window.scrollY,a=e-s,d=document.documentElement.scrollTop||window.scrollY;window.requestAnimationFrame(function e(){var t=Date.now(),u=function(e,t,o){return i[n]((o-e)/(t-e))}(o,r,t),l=Math.round(s+a*u);window.scrollTo(window.scrollX,l),t>=r||(document.documentElement.scrollTop||window.scrollY)===d&&(document.documentElement.scrollTop||window.scrollY)!==l||(d=document.documentElement.scrollTop||window.scrollY,window.requestAnimationFrame(e))})}}]);